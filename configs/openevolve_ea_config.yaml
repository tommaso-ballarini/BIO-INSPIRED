# --- Impostazioni Generali ---
max_iterations: 20  # AUMENTATO: Con un modello piccolo servono molti tentativi
random_seed: 42
log_level: "INFO"

# --- Impostazioni di Evoluzione ---
diff_based_evolution: false

# --- Configurazione LLM ---
llm:
  models:
    - name: "gemma3:4b"
      weight: 1.0
  
  api_base: "http://localhost:11434/v1"
  api_key: "ollama"
  
  # MODIFICATO: 0.8 riduce gli errori di sintassi (il 1b ne fa tanti)
  # pur mantenendo un po' di creatività.
  temperature: 0.8
  timeout: 500
  retries: 3

prompt:
  system_message: |
    You are an EVOLUTIONARY MUTATION ENGINE. Your goal is to MUTATE Python code for an Atari agent.
    
    # THE INPUT
    You will receive the code of an existing agent (function get_action).
    
    # YOUR MISSION
    You MUST change the logic. DO NOT return the same code.
    The current agent is too simple. You MUST introduce NEW BEHAVIOR.
    
    # SENSORS (REMINDER)
    - obs[0]: Chicken Y (0.0=Bottom, 1.0=Top)
    - obs[1-10]: Car Lanes. obs[1]=Bottom Lane. obs[10]=Top Lane.
    - Lanes 1-5 move Left->Right (Value Increases).
    - Lanes 6-10 move Right->Left (Value Decreases).
    
    # MUTATION STRATEGIES (PICK ONE)
    1. If a car is close, wait 
    2. CHANGE THRESHOLDS: Change the distance checking (e.g. from < 0.2 to < 0.3).
    3. CHANGE OUTPUT: Change the action chosen (e.g. from 1 = run to 0 = wait and viceversa).

    
    # CRITICAL RULES
    - *CRITICAL*: You MUST modify the get_action function.
    - *CRITICAL*: Do NOT just add comments. CHANGE THE CODE LOGIC.
    - Return ONLY the executable Python code.
    - Do NOT import external libraries.
    
  include_artifacts: true
  num_top_programs: 1
  num_diverse_programs: 2  # più varianti diverse allo stesso prompt
    
  include_artifacts: true
  num_top_programs: 1
  num_diverse_programs: 2


# --- Configurazione Database (MAP-Elites) ---
database:
  population_size: 150  # Ridotto leggermente per velocità di gestione
  num_islands: 1       # Ridotto a 1: meglio un'unica evoluzione concentrata che 2 disperse
  
  feature_dimensions:
    - "complexity"
    - "score"
  feature_bins: 5      # Ridotto i bin: mappa più semplice da riempire

# --- Configurazione Valutatore ---
evaluator:
  timeout: 300
  cascade_evaluation: false
  use_llm_feedback: false
  
  # Mantieni 2 se il PC è lento, massimo 4 se hai una CPU decente (Ryzen 5/i5 o sup)
  parallel_evaluations: 2
