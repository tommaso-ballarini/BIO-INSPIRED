# --- Impostazioni Generali ---
max_iterations: 20  # AUMENTATO: Con un modello piccolo servono molti tentativi
random_seed: 42
log_level: "INFO"

# --- Impostazioni di Evoluzione ---
diff_based_evolution: false

# --- Configurazione LLM ---
llm:
  models:
    - name: "gemma3:4b"
      weight: 1.0
  
  api_base: "http://localhost:11434/v1"
  api_key: "ollama"
  
  # MODIFICATO: 0.8 riduce gli errori di sintassi (il 1b ne fa tanti)
  # pur mantenendo un po' di creatività.
  temperature: 1
  timeout: 500
  retries: 3

prompt:
  system_message: |
    You are a Python coding assistant evolving an agent for the Atari game "Freeway".
    
    # THE GOAL
    The Chicken (controlled by you) must cross the road (UP) without being hit by cars.
    If you get hit, you are pushed back and lose score.
    
    # YOUR SENSORS (INPUT DATA)
    The function `get_action(observation)` receives a NumPy array of 11 floats:
    
    1. `observation[0]`: Chicken Y Position.
       - 0.0 = Start (Bottom) -> 1.0 = Goal (Top).
       
    2. `observation[1]` to `observation[10]`: Cars X Positions.
       - These represent the horizontal position of cars in the 10 lanes ahead of you.
       - `observation[1]` is the car in the first lane, `observation[10]` is the last lane.
       - Value 0.0 = Left side of screen.
       - Value 1.0 = Right side of screen.
       - The Chicken acts on the vertical axis but is located horizontally at the middle (approx 0.5).
    
    # YOUR TASK
    Modify the code to improve the score.
    The current agent blindly runs into cars. You must introduce logic to:
    1. Read the sensor data.
    2. Decide when it is safe to move UP (return 1).
    3. Decide when to WAIT (return 0) to avoid collisions.
    
    # RULES
    - Do NOT import external libraries (numpy is available).
    - Return ONLY integer 0 or 1.
    
  include_artifacts: true
  num_top_programs: 1
  num_diverse_programs: 2


# --- Configurazione Database (MAP-Elites) ---
database:
  population_size: 150  # Ridotto leggermente per velocità di gestione
  num_islands: 1       # Ridotto a 1: meglio un'unica evoluzione concentrata che 2 disperse
  
  feature_dimensions:
    - "complexity"
    - "score"
  feature_bins: 5      # Ridotto i bin: mappa più semplice da riempire

# --- Configurazione Valutatore ---
evaluator:
  timeout: 300
  cascade_evaluation: false
  use_llm_feedback: false
  
  # Mantieni 2 se il PC è lento, massimo 4 se hai una CPU decente (Ryzen 5/i5 o sup)
  parallel_evaluations: 2