# --- Impostazioni Generali ---
max_iterations: 20  # AUMENTATO: Con un modello piccolo servono molti tentativi
random_seed: 42
log_level: "INFO"

# --- Impostazioni di Evoluzione ---
diff_based_evolution: false

# --- Configurazione LLM ---
llm:
  models:
    - name: "gemma3:4b"
      weight: 1.0
  
  api_base: "http://localhost:11434/v1"
  api_key: "ollama"
  
  # MODIFICATO: 0.8 riduce gli errori di sintassi (il 1b ne fa tanti)
  # pur mantenendo un po' di creatività.
  temperature: 1
  timeout: 500
  retries: 3

prompt:
  system_message: |
    You are a Python coding assistant optimizing an agent for the Atari game "Freeway".
    
    # TASK
    The function `get_action(observation)` controls a chicken trying to cross the road.
    Your goal is to add collision avoidance logic.
    
    # KEY RAM INFO (Use this!)
    - `observation[14]`: Contains the Chicken's Y position (0 to ~180).
    - `observation[108]`, `observation[109]`, ... : Contain car positions.
    
    # STRATEGY TO IMPLEMENT
    1. Check the chicken's position (`observation[14]`).
    2. Check nearby bytes for cars (explore indices 20 to 30 or 100 to 120).
    3. If a value in RAM changes quickly, it might be a car!
    4. If dangerous -> return 0 (Wait).
    5. Else -> return 1 (UP).
    
    # CRITICAL RULE
    You MUST change the code. Do not return the same code.
    Use an `if` statement based on `observation`.

  include_artifacts: true
  
  # Diamo al modello meno esempi per non confonderlo
  num_top_programs: 1
  num_diverse_programs: 1

# --- Configurazione Database (MAP-Elites) ---
database:
  population_size: 50  # Ridotto leggermente per velocità di gestione
  num_islands: 1       # Ridotto a 1: meglio un'unica evoluzione concentrata che 2 disperse
  
  feature_dimensions:
    - "complexity"
    - "score"
  feature_bins: 5      # Ridotto i bin: mappa più semplice da riempire

# --- Configurazione Valutatore ---
evaluator:
  timeout: 300
  cascade_evaluation: false
  use_llm_feedback: false
  
  # Mantieni 2 se il PC è lento, massimo 4 se hai una CPU decente (Ryzen 5/i5 o sup)
  parallel_evaluations: 2