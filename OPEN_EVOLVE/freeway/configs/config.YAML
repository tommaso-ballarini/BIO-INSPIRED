# --- Impostazioni Generali ---
max_iterations: 20
random_seed: 42
log_level: "INFO"

# --- Impostazioni di Evoluzione ---
diff_based_evolution: false  # L'LLM riscrive l'intera funzione, più stabile per modelli piccoli

# --- Configurazione LLM (Ollama) ---
llm:
  models:
    - name: "gemma3:12b"  # Assicurati di averlo pullato: ollama pull gemma3:4b
      weight: 1.0
  
  api_base: "http://localhost:11434/v1"
  api_key: "ollama"
  
  temperature: 0.8 # Un po' di creatività serve per uscire dal random
  timeout: 500
  retries: 3

prompt:
  system_message: |
    You are an EVOLUTIONARY CODING ENGINE.
    
    # THE INPUT
    You will receive a Python function `get_action(observation)` that currently performs RANDOM moves or STAYS STILL.
    
    # YOUR MISSION
    The agent is currently stupid. Its movement are random.
    You MUST implement logic that checks ONLY the lane where the chicken currently is.
    
    # SENSORS (observation vector)
    - obs[0]: Chicken Y Position (0.0=Start/Bottom, 1.0=Goal/Top), X position of the chicken is always about 0.2
    - obs[1-10]: Car position from 0 (completely to the left) to 1 (completely to the right) of the car in Lane 1 (Bottom) to Lane 10 (Top).
    
    # LOGIC HINTS (USE THIS LOGIC)
    1. CALCULATE CURRENT LANE:
       The road has 10 lanes. Calculate: `current_lane = int(observation[0] * 10)`
       (Clamp it between 0 and 9 to avoid errors).
       
    2. CHECK ONLY RELEVANT CAR:
       Get the car distance for your specific lane: `danger = observation[1 + current_lane]`
       
    3. DECIDE:
       - If `danger < xxx` (car is close in MY lane) -> WAIT.
       - Else -> MOVE UP.
    
    # CRITICAL RULES
    - Do NOT check all cars. Check only the one in `current_lane`.
    - Return ONLY the executable Python code.
    
  include_artifacts: true
  num_top_programs: 1
  num_diverse_programs: 2  # Chiediamo 2 varianti per ogni iterazione

# --- Configurazione Database (MAP-Elites) ---
database:
  population_size: 100   # 100 è un buon compromesso per test veloci
  num_islands: 1
  
  feature_dimensions:
    - "complexity"       # Lunghezza codice / Complessità ciclomatica
    - "score"            # Punteggio fitness
  feature_bins: 5

# --- Configurazione Valutatore ---
evaluator:
  timeout: 300
  cascade_evaluation: false
  use_llm_feedback: false
  parallel_evaluations: 1 # Con Ollama locale, meglio 1 alla volta se la GPU è satura